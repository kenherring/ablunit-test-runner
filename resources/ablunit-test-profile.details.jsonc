/********* Test Run Configuration for the ABLUnit Test Runner Extension *********/

////#
////# !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
////# !!!!! This file and the configuration values are not required !!!!!
////# !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
////#
////# Keys which are not provided in this file will use the defaults as referenced below.
////#
////#  * Blank values are the same as not providing the key.
////#  * Some keys can be disabled by settings to null, see key desription for details.
////#  * All paths are assumed as relative to the workspace, or absolute.
////#
////# The following substituion can be used in path values:
////#   * ${workspaceFolder} - The path of the folder opened in VS Code
////#   * ${tempDir} - See the "tempDir" key below
////#   * ${extensionContextStorage} - The path to the extension's storage directory
////#   * ${DLC} - The value of the DLC environment variable


{

	////# These parameters will be passed to the command line.  Most commonly
	////# this would be used to provide database connection parameters.
	////# "additionalArgs": [
	////#    "-pf",
	////# 	 "path/to/dbconnections.pf"
	////# ],
	"additionalArgs": [],

	////# Path to the "progressIni" file which can define a propath, etc.  It will be
	////# passed to the test run process with the following parameters:
	////#    '-basekey INI -ininame ${progressIni}'
	////#
	////# Notes:
	////#   * When the value provided resolves to an existing file it will be copied
	////#     to the "tempDir" before test execution.
	////#   * If no value is provided or the file does not exist the extension will
	////#     attempt to create a default progress.ini file in the "tempDir".
	////#   * A blank value will remove the related args from the command line.
	"progressIni": "",

	////# Path to the executable used launch the test run.
	"executable": "${DLC}/_progres",

	////# Include batch mode (-b) argument
	"batch": true,

	////# This "files" key defines glob patterns used to identify test files.
	////# More information on glob patterns can be found here:
	////#   * https://code.visualstudio.com/docs/editor/glob-patterns
	"files": {
		"include": [
			"**/*.{cls,p}"
		],
		"exclude": [
			"**/.builder/**",  // OpenEdge ABL Extension working directory
			"**/.pct/**"       // Output path generally used with ant/PCT tasks
		]
	},

	////# Path to directory where temporary files will be written.  This path will be
	////# added to the command line with the temporary directory (-T) option.
	////# Files generated by this extension and OpenEdge progress will be written here.
	////#
	////# NOTE: A null value will disable the -T option from the command execution but
	////#       may still use the default value for extension generated files.
	"tempDir": "${extensionContextStorage}",


	////# The "config" key contains values that will be added to 'ablunit.json'.
	////# See the OpenEdge documentation for more information about these values.
	////#   * https://docs.progress.com/bundle/openedge-developer-studio-help/page/Run-test-cases-from-the-command-prompt.html
	////#
	////# NOTE: 'ablunit.json will not be created when "options": null
	"options": {
		"output": {
			"location": "${tempDir}",
			"filename": "results",
			"format": "xml"
		},
		"quitOnEnd": true,
		"writeLog":  null,
		"showErrorMessage": true,
		"throwError": true
	},

	////# By default this extension enable the PROFILER when running tests.  The output
	////# is parsed to calculate and render code coverage.  The keys in this section can be
	////# modified to further change the behavior of the PROFILER during test execution.
	////#
	////# These options are added to a 'profiler.options' file and passed as command line args:
	////#   `-profile ${tempDir}/profiler.options`
	////#
	////# NOTES:
	////#   * When the "enabled" flag is false the process will not have the profiler enabled
	////#     on startup but the `-profile` option is passed to the command., args will not be passed to
	////#     the command line, and the "profiler.options" file will not be created.
	////#   * When the "profilerOptions" key is set to null the 'profile.options' file will not
	////#     be created and the `-profile` option will not be passed to the command line.
	////#
	////# See the OpenEdge documentation for more information about these values.
	////#   * https://docs.progress.com/bundle/openedge-startup-and-parameter-reference/page/Profiler-profile.html
	////#   * https://docs.progress.com/bundle/abl-reference/page/PROFILER-system-handle.html
	"profilerOptions": {
		"enabled": true,
		"coverage": true,
		"description": "Run via VSCode - ABLUnit Test Provider Extension",
		"filename": "prof.out",
		"listings": null,
		"statistics": false,
		"traceFilter": null,
		"tracing": null,
		"writeJson": false
	}
}
